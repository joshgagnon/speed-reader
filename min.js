!function(){var e,t,n=".output {     visibility: visible;     font-size:20px;     padding-top:10px;     padding-bottom:10px;     min-height: 20px; } .control_wrapper { } .control_wrapper label{     width:60px;     display:inline-block;     text-align:right; } .control_wrapper span{     width:60px;     display:inline-block;        text-align:left; } .reader_controls:hover .control_wrapper {     visibility:visible; } .control_wrapper input[type=range]{  width:100px; }.control_wrapper input[type=button]{  width:75px; }",i='<div class="output"></div><div class="control_wrapper"><div class="button_bar"><input type="button" class="start" value="To Start" /><input type="button" class="play" value="Play" /><input type="button" class="pause" value="Pause" /><input type="button" class="close" value="Close" /></div><div class="position_bar"><label for="position_slider">Position</label><input type="range" name="position_slider" class="position_slider" min=0" max="1" value="0" /><span class="show_position">0%</span></div><div class="speed_bar"><label for="speed">Speed</label><input type="range" name="speed" class="speed" min="1" max="600" value="300" /> <span class="wpm"></span></div><div class="font_size_bar"><label for="font_size">Font Size</label><input type="range" name="fontsize" class="font_size" min="20" max="166" value="16" /><span class="show_size">20px</span></div>',s=function(e,t){for(var n in t)e.style[n]=t[n];return e},o=function(e,t){return Array.prototype.forEach.call(document.querySelectorAll(e),t)},a=function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)},l=function(e,t,n){"use strict";if(!this||this===window)return new l(e,t,n);var o=document.createElement("div");o.classList.add("reader_controls"),s(o,{fontSize:"16px",textAlign:"center",position:"absolute",visibility:"visible",backgroundColor:"rgba(255,255,255,0.95)"}),o.innerHTML=i,document.getElementsByTagName("body")[0].appendChild(o),e.classList.add("source_text"),s(o,t);var a,p,r=o.getElementsByClassName("output")[0],d=(o.getElementsByClassName("bg")[0],o.getElementsByClassName("speed")[0]),c=o.getElementsByClassName("start")[0],u=o.getElementsByClassName("play")[0],h=o.getElementsByClassName("pause")[0],g=o.getElementsByClassName("close")[0],y=o.getElementsByClassName("wpm")[0],m=o.getElementsByClassName("position_slider")[0],v=o.getElementsByClassName("font_size")[0],b=o.getElementsByClassName("show_size")[0],f=o.getElementsByClassName("show_position")[0],x=function(e){return{array:e.textContent.replace(/^\s+|\s+$/g,"").split(" "),position:0}};this.showWord=function(){r.innerHTML=p.array[p.position],f.innerHTML=(p.position/p.array.length*100|0)+"%",m.value=p.position}.bind(this),this.showSpeed=function(){y.innerHTML=d.value+" wpm"}.bind(this),this.readPosition=function(){p.position=0|m.value,this.showWord(),this.pauseReading()}.bind(this),this.changeFontSize=function(){r.style["font-size"]=v.value+"px",b.innerHTML=v.value+"px"}.bind(this),this.loop=function(){this.showWord(),p.position=(p.position+1)%p.array.length}.bind(this),this.run=function(){this.pauseReading(),this.showSpeed(),a=setInterval(this.loop,1/d.value*1e3*60)}.bind(this),this.goToBeginning=function(){p.position=0,r.innerHTML=p.array[p.position]}.bind(this),this.startReading=function(){this.run(),h.style.display="",u.style.display="none"}.bind(this),this.pauseReading=function(){clearInterval(a),u.style.display="",h.style.display="none"}.bind(this),this.change=function(){this.run()}.bind(this),this.listeners=function(){c.addEventListener("click",this.goToBeginning),u.addEventListener("click",this.startReading),h.addEventListener("click",this.pauseReading),g.addEventListener("click",this.destroy),d.addEventListener("change",this.change),m.addEventListener("input",this.readPosition),v.addEventListener("change",this.changeFontSize)}.bind(this),this.destroy=function(t){t.stopPropagation(),this.pauseReading(),e.classList.remove("source_text"),o.parentNode.removeChild(o),n&&n()}.bind(this),p=x(e),m.max=p.array.length-1,this.listeners(),this.showSpeed(),this.pauseReading(),this.goToBeginning(),this.showWord()},p=function(){e&&e.remove()};a(n),o("div:not(.hov_overlay),p:not(.hov_overlay)",function(n){n.addEventListener("mouseenter",function(i){t||(i.stopPropagation(),p(),e=document.createElement("div"),e.classList.add("hov_overlay"),style={position:"absolute",left:n.getBoundingClientRect().left+document.body.scrollLeft+"px",top:n.getBoundingClientRect().top+document.body.scrollTop+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px","box-shadow":"0 0 21px 10px #0F0","z-index":14999,opacity:.5,display:"inline-block","pointer-events":"none",cursor:"pointer"},s(e,style),document.body.appendChild(e))}),n.addEventListener("mouseleave",function(e){t||(e.stopPropagation(),p())}),n.addEventListener("click",function(){t||(t=l(n,{left:n.getBoundingClientRect().left+document.body.scrollLeft+"px",top:n.getBoundingClientRect().top+document.body.scrollTop+"px",width:n.offsetWidth+"px"},function(){t=null}),p())})})}();